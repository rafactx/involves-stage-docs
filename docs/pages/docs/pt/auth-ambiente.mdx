---
title: 'Autentica√ß√£o e Cabe√ßalhos'
---

import { Callout } from 'zudoku/ui/Callout';
import { Card, CardContent, CardHeader } from 'zudoku/ui/Card';

## üîß Cabe√ßalhos HTTP obrigat√≥rios

<p className="text-muted-foreground mb-6">
  Todas as requisi√ß√µes para a API devem incluir os seguintes cabe√ßalhos:
</p>

<Card className="bg-[#f9f9fb] dark:bg-[#1e1e1e] border border-[#d4d4d8] dark:border-[#3a3a3c] rounded-xl overflow-hidden">
  <CardHeader className="bg-[#e4e4e7] dark:bg-[#2c2c2e] border-b border-[#d4d4d8] dark:border-[#3a3a3c] py-3">
    <div className="flex items-center gap-2">
      <div className="flex gap-1.5">
        <div className="w-3 h-3 rounded-full bg-red-500" />
        <div className="w-3 h-3 rounded-full bg-yellow-500" />
        <div className="w-3 h-3 rounded-full bg-green-500" />
      </div>
      <span className="text-xs text-[#4b5563] dark:text-gray-400 font-mono ml-2">request.headers</span>
    </div>
  </CardHeader>

  <CardContent className="p-0 font-mono text-sm text-[#111827] dark:text-slate-300">
    <div className="divide-y divide-[#d4d4d8] dark:divide-[#3a3a3c]">
      <div className="flex gap-4 px-6 py-3 items-start hover:bg-[#f4f4f5] dark:hover:bg-slate-800/50 transition-colors">
        <span className="font-bold text-blue-600 dark:text-blue-400 min-w-[140px]">Authorization</span>
        <span className="text-[#4b5563] dark:text-slate-400">Basic base64(usuario:senha) ‚Äî autentica√ß√£o do usu√°rio.</span>
      </div>

      <div className="flex gap-4 px-6 py-3 items-start hover:bg-[#f4f4f5] dark:hover:bg-slate-800/50 transition-colors">
        <span className="font-bold text-purple-600 dark:text-purple-400 min-w-[140px]">X-AGILE-CLIENT</span>
        <span className="text-[#4b5563] dark:text-slate-400">Sempre <code>EXTERNAL_APP</code> ‚Äî indica que a requisi√ß√£o √© externa.</span>
      </div>

      <div className="flex gap-4 px-6 py-3 items-start hover:bg-[#f4f4f5] dark:hover:bg-slate-800/50 transition-colors">
        <span className="font-bold text-pink-600 dark:text-pink-400 min-w-[140px]">Accept-Version</span>
        <span className="text-[#4b5563] dark:text-slate-400">Exemplo: <code>2020-02-26</code> ‚Äî define a vers√£o da API v3 a ser usada.</span>
      </div>
    </div>

</CardContent>

  <div className="px-6 py-3 bg-[#e4e4e7] dark:bg-[#2c2c2e] border-t border-[#d4d4d8] dark:border-[#3a3a3c]">
    <span className="text-xs text-[#4b5563] dark:text-gray-400">
      Vers√µes anteriores (v1 e v2) n√£o exigem o header <code>Accept-Version</code>.
    </span>
  </div>
</Card>

---

## üìÖ Versionamento via cabe√ßalho

Na API v3, voc√™ escolhe explicitamente a vers√£o do endpoint atrav√©s do cabe√ßalho `Accept-Version`. Isso garante que mudan√ßas futuras n√£o ir√£o impactar negativamente a sua integra√ß√£o j√° estabelecida.

Exemplo pr√°tico:

- Voc√™ implementou sua integra√ß√£o usando o header `Accept-Version: 2020-02-26`.
- Qualquer mudan√ßa n√£o retrocompat√≠vel ser√° lan√ßada com uma data posterior (ex.: `2021-05-14`), garantindo que a sua integra√ß√£o continue funcionando normalmente.
- Para atualizar sua integra√ß√£o, basta trocar a vers√£o do header em chamadas espec√≠ficas quando necess√°rio, sem precisar atualizar todos os endpoints.

<Callout type="tip" icon={false} className="text-sm leading-relaxed">
  **Vers√£o atual da API v3:** `2020-02-26`
</Callout>

---

## üîê Autentica√ß√£o

<p className="text-muted-foreground mb-6">
  A API utiliza exclusivamente <strong>HTTP Basic Authentication</strong> com credenciais
  codificadas em Base64.
</p>

<Card className="bg-[#f9f9fb] dark:bg-[#1e1e1e] border border-[#d4d4d8] dark:border-[#3a3a3c] rounded-xl overflow-hidden">
  <CardHeader className="bg-[#e4e4e7] dark:bg-[#2c2c2e] border-b border-[#d4d4d8] dark:border-[#3a3a3c] py-3">
    <div className="flex items-center gap-2">
      <div className="flex gap-1.5">
        <div className="w-3 h-3 rounded-full bg-red-500" />
        <div className="w-3 h-3 rounded-full bg-yellow-500" />
        <div className="w-3 h-3 rounded-full bg-green-500" />
      </div>
      <span className="text-xs text-[#4b5563] dark:text-gray-400 font-mono ml-2">
        Authorization header
      </span>
    </div>
  </CardHeader>

<CardContent className="p-6 font-mono text-sm text-[#111827] dark:text-slate-300 space-y-2">
  <div>
    <span className="block text-[#4b5563] dark:text-slate-400 mb-1">Usu√°rio:</span>
    <code className="block bg-muted p-2 rounded">seuUsuarioDoInvolvesStage</code>
  </div>
  <div>
    <span className="block text-[#4b5563] dark:text-slate-400 mb-1">Senha:</span>
    <code className="block bg-muted p-2 rounded">suaSenhaDoInvolvesStage</code>
  </div>
  <div>
    <span className="block text-[#4b5563] dark:text-slate-400 mb-1">Header completo:</span>
    <code className="block bg-muted p-2 rounded">
      Authorization: Basic YWdpbGl0bzppbnZvbHZlcw==
    </code>
  </div>
</CardContent>

  <div className="px-6 py-3 bg-[#e4e4e7] dark:bg-[#2c2c2e] border-t border-[#d4d4d8] dark:border-[#3a3a3c]">
    <span className="text-xs text-[#4b5563] dark:text-gray-400">
      Dica: use <code className="text-blue-600 dark:text-blue-400">btoa('usuario:senha')</code> no console para gerar o valor codificado.
    </span>
  </div>
</Card>

## üåç Identifica√ß√£o do Ambiente (Environment ID)

A maioria dos endpoints exige o `environmentId`. A URL completa fica assim:

```
https://exemplo.involves.com/webservices/api/v3/environments/{environmentId}
```

Para obter o ID correto:

1. V√° at√© **Administra√ß√£o de Ambientes** no Involves Stage.
2. Selecione o ambiente desejado e clique em **Editar**.
3. Copie o ID do ambiente exibido na URL do navegador.

<Callout type="tip" title="Dica Pro" className="text-sm leading-relaxed">
  Use o atalho{' '}
  <strong>
    <u>Ctrl + K -> Administra√ß√£o de Ambientes</u>
  </strong>{' '}
  para encontrar a tela rapidamente.
</Callout>
